---
import Layout from "../layouts/Layout.astro";

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: [
    {
      "@type": "Question",
      name: "¬øCu√°l es el horario de atenci√≥n de Proteck?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Nuestro horario de atenci√≥n administrativa es de lunes a viernes de 8:00 AM a 6:00 PM, y los s√°bados de 9:00 AM a 2:00 PM. Contamos con soporte t√©cnico para emergencias disponible 24/7.",
      },
    },
    {
      "@type": "Question",
      name: "¬øD√≥nde se encuentran las oficinas de Proteck?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Nuestras oficinas centrales est√°n situadas en San Jos√©, Costa Rica, espec√≠ficamente 400 metros al este del Gimnasio Nacional.",
      },
    },
    {
      "@type": "Question",
      name: "¬øC√≥mo puedo solicitar una cotizaci√≥n de seguridad?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Puede solicitar una cotizaci√≥n gratuita completando nuestro formulario de contacto en l√≠nea, enviando un correo a info@speproteck.com o llamando directamente al +506 2248-1071.",
      },
    },
  ],
};
---

<Layout
  title="Cont√°ctenos | Solicite su Cotizaci√≥n de Seguridad | Proteck"
  description="¬øNecesita proteger su hogar o empresa? Cont√°ctenos hoy para recibir una asesor√≠a gratuita sobre GPS, CCTV y sistemas de seguridad electr√≥nica en Costa Rica."
  pageSchema={faqSchema}
>
  <!-- HERO -->
  <section class="contact-hero">
    <div class="container">
      <h1 data-animate="fade-up">Contacto</h1>
      <p data-animate="fade-up" data-delay="200">
        Estamos aqu√≠ para ayudarte. Cont√°ctanos para obtener informaci√≥n sobre
        nuestros productos y servicios de telemetr√≠a y seguridad.
      </p>
    </div>
  </section>

  <!-- CONTENIDO -->
  <section class="contact-content">
    <div class="container contact-grid">
      <!-- INFO -->
      <aside class="contact-info" data-animate="fade-right">
        <h2>Informaci√≥n de Contacto</h2>

        <div class="info-item">
          <span class="info-ico">üìû</span>
          <div>
            <div class="info-title">Tel√©fono:</div>
            <a class="info-link" href="tel:+50622481071">2248-1071</a>
          </div>
        </div>

        <div class="info-item">
          <span class="info-ico">‚úâÔ∏è</span>
          <div>
            <div class="info-title">Email:</div>
            <a class="info-link" href="mailto:info@speproteck.com"
              >info@speproteck.com</a
            >
          </div>
        </div>

        <div class="info-item">
          <span class="info-ico">üßæ</span>
          <div>
            <div class="info-title">Horarios de Atenci√≥n:</div>
            <div class="info-text">Lunes a Viernes: 8:00 AM ‚Äì 6:00 PM</div>
            <div class="info-text">S√°bados: 9:00 AM ‚Äì 2:00 PM</div>
          </div>
        </div>

        <div class="info-item">
          <span class="info-ico">üõü</span>
          <div>
            <div class="info-title">Soporte 24/7:</div>
            <div class="info-text">Para emergencias y soporte t√©cnico</div>
          </div>
        </div>

        <div class="info-item">
          <span class="info-ico">üìç</span>
          <div>
            <div class="info-title">Direcci√≥n:</div>
            <div class="info-text">400 este del Gimnasio Nacional</div>
          </div>
        </div>
      </aside>

      <!-- FORM -->
      <section class="contact-form" data-animate="fade-left">
        <h2>Env√≠anos un Mensaje</h2>

        <form class="form" id="contact-form">
          <div class="field">
            <label for="nombre"
              >Nombre Completo <span class="req">*</span></label
            >
            <input type="text" name="nombre" id="nombre" required />
          </div>

          <div class="field">
            <label for="email">Email <span class="req">*</span></label>
            <input type="email" name="email" id="email" required />
          </div>

          <div class="field">
            <label for="telefono">Tel√©fono</label>
            <input type="tel" name="telefono" id="telefono" />
          </div>

          <div class="field">
            <label for="servicio"
              >Servicio de Inter√©s <span class="req">*</span></label
            >
            <select name="servicio" id="servicio" required>
              <option value="GPS y Telemetr√≠a">GPS y Telemetr√≠a</option>
              <option value="CCTV">CCTV</option>
              <option value="Alarmas">Alarmas</option>
              <option value="Control de Acceso">Control de Acceso</option>
            </select>
          </div>

          <div class="field">
            <label for="inmueble"
              >¬øQu√© inmueble deseas proteger? <span class="req">*</span></label
            >
            <select name="inmueble" id="inmueble" required>
              <option value="" selected disabled
                >¬øQu√© inmueble deseas proteger?</option
              >
              <option value="Casa">Casa</option>
              <option value="Apartamento">Apartamento</option>
              <option value="Negocio">Negocio</option>
              <option value="Bodega">Bodega</option>
              <option value="Otro">Otro</option>
            </select>
          </div>

          <div class="field">
            <label for="motivo">¬øPor qu√© necesitas una alarma?</label>
            <select name="motivo" id="motivo">
              <option value="" selected disabled
                >¬øPor qu√© necesitas una alarma?</option
              >
              <option value="Prevenci√≥n">Prevenci√≥n</option>
              <option value="Robo previo">Robo previo</option>
              <option value="Recomendaci√≥n">Recomendaci√≥n</option>
              <option value="Otro">Otro</option>
            </select>
          </div>

          <div class="field">
            <label for="tiene_alarma">¬øTienes alarma?</label>
            <select name="tiene_alarma" id="tiene_alarma">
              <option value="" selected disabled>¬øTienes alarma?</option>
              <option value="S√≠">S√≠</option>
              <option value="No">No</option>
            </select>
          </div>

          <div class="field">
            <label for="ubicacion">¬øD√≥nde est√° situada?</label>
            <select name="ubicacion" id="ubicacion">
              <option value="" selected disabled>¬øD√≥nde est√° situada?</option>
              <option value="Residencial">Residencial</option>
              <option value="Comercial">Comercial</option>
              <option value="Industrial">Industrial</option>
              <option value="Otro">Otro</option>
            </select>
          </div>

          <div class="field">
            <label for="robos"
              >¬øHan robado alguna vez en tu casa o donde tus vecinos?</label
            >
            <select name="robos" id="robos">
              <option value="" selected disabled
                >¬øHan robado alguna vez en tu casa o donde tus vecinos?</option
              >
              <option value="S√≠">S√≠</option>
              <option value="No">No</option>
              <option value="No s√©">No s√©</option>
            </select>
          </div>

          <div class="field">
            <label for="provincia"
              >¬øEn qu√© provincia te encuentras? <span class="req">*</span
              ></label
            >
            <select name="provincia" id="provincia" required>
              <option value="" selected disabled
                >¬øEn qu√© provincia te encuentras?</option
              >
              <option value="San Jos√©">San Jos√©</option>
              <option value="Alajuela">Alajuela</option>
              <option value="Cartago">Cartago</option>
              <option value="Heredia">Heredia</option>
              <option value="Guanacaste">Guanacaste</option>
              <option value="Puntarenas">Puntarenas</option>
              <option value="Lim√≥n">Lim√≥n</option>
            </select>
          </div>

          <div class="field">
            <label for="mensaje">Mensaje</label>
            <textarea
              name="mensaje"
              id="mensaje"
              rows="7"
              placeholder="Describe tu proyecto o consulta..."></textarea>
          </div>

          <div id="form-status" class="form-status"></div>

          <button class="submit-btn" type="submit" id="submit-btn">
            <span class="btn-text">Enviar</span>
            <span class="btn-loader" style="display: none;">Enviando...</span>
          </button>
        </form>

        <style>
          .form-status {
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
            font-weight: 500;
          }
          .form-status.success {
            display: block;
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.2);
          }
          .form-status.error {
            display: block;
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.2);
          }
          .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
          }
        </style>

        <script>
          const form = document.getElementById(
            "contact-form",
          ) as HTMLFormElement;
          const statusDiv = document.getElementById("form-status");
          const submitBtn = document.getElementById(
            "submit-btn",
          ) as HTMLButtonElement;
          const btnText = submitBtn?.querySelector(".btn-text") as HTMLElement;
          const btnLoader = submitBtn?.querySelector(
            ".btn-loader",
          ) as HTMLElement;

          if (form && statusDiv && submitBtn && btnText && btnLoader) {
            form.addEventListener("submit", async (e) => {
              e.preventDefault();

              // Reset status
              statusDiv.style.display = "none";
              statusDiv.className = "form-status";

              // Set loading state
              submitBtn.disabled = true;
              btnText.style.display = "none";
              btnLoader.style.display = "inline";

              const formData = new FormData(form);

              try {
                const response = await fetch("/api/send-email", {
                  method: "POST",
                  body: formData,
                });

                const result = await response.json();

                if (response.ok) {
                  statusDiv.textContent = result.message;
                  statusDiv.classList.add("success");
                  form.reset();
                } else {
                  statusDiv.textContent =
                    result.message || "Error al enviar el mensaje.";
                  statusDiv.classList.add("error");
                }
              } catch (error) {
                statusDiv.textContent =
                  "Error de conexi√≥n. Int√©ntalo de nuevo.";
                statusDiv.classList.add("error");
              } finally {
                submitBtn.disabled = false;
                btnText.style.display = "inline";
                btnLoader.style.display = "none";
                statusDiv.style.display = "block";
              }
            });
          }
        </script>
      </section>
    </div>
  </section>
</Layout>
